---
title: "Don't let admins modify staff roles"
categories: [backend, 25.05.04, hotfix]
sidebar: release-notes
toc-expand: true
date: "May 23, 2025"
# PR URL: https://github.com/validmind/backend/pull/1482
---
#### What
<!-- Describe what the change is doing, including behavior before and after the change -->
Makes it so that admins can no longer modify staff roles via `PATCH /api/v1/roles/<protected_role_id>/permissions`

#### External Release Notes
<!--- REPLACE THIS COMMENT WITH YOUR DESCRIPTION --->
Remove a potential security vulnerability where admins could change staff roles.

#### Breaking Changes
<!-- List any breaking changes -->

#### Screenshots/Videos (Frontend Only)
<!-- Add screenshots or videos showing before/after -->

# PR Summary

This pull request refactors parts of the role management endpoints in the backend. The primary changes include:

1. Consistent naming: The variable previously named `orgRole` has been renamed to `org_role` throughout the GET and PATCH endpoints to follow snake_case conventions and improve code readability.

2. Enhanced role protection: In the PATCH endpoint, an additional check has been introduced to prevent modifications to roles marked as `staff`, similar to the existing constraint for `admin` roles. This ensures that both admin and staff roles remain immutable via this endpoint.

3. Minor refactoring: The diff shows a systematic renaming and minor logic adjustments to maintain consistency across related queries and handling of permissions. Overall, these changes should improve maintainability and enforce proper role-based restrictions within the application.