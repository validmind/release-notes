---
title: "Check model permissions on `/api/v1/workflows/targets/{cuid}/executions` (#1470)"
categories: [backend, 25.05.04, hotfix, bug, security]
sidebar: release-notes
toc-expand: true
date: "May 16, 2025"
# Content edited by AI - 2025-06-04 12:29
# Content validated by AI - 2025-06-04 12:29
# Content overwritten from an earlier version - 2025-06-04 12:29
# PR URL: https://github.com/validmind/backend/pull/1470
---

This update enhances the API route `/api/v1/workflows/targets/{cuid}/executions` by refining how executions are filtered. Previously, while `Workflow.get_workflow` correctly filtered workflows by the user's organization, `Execution.get_by_target` did not. Now, `Execution.get_by_target` includes a user parameter to ensure that executions by target (model) are also filtered to only include those from the user's organization.

This update refactors workflow retrieval methods to focus on the associated organization rather than the user object. Key changes include:

- In `src/backend/db/workflow.py`, the `get_workflow` method now requires an organization and a `cuid`. It raises a `ValueError` with a descriptive message if the organization is not provided.

- The `get_by_target` method now accepts an organization parameter, filtering queries using the organization associated with the workflow. This ensures workflow executions are correctly scoped by organization.

- In the REST API endpoints within `src/backend/routes/ui_workflows.py`, calls to `Workflow.get_workflow` now use `g.current_user_org` instead of `g.current_user`, aligning data retrieval with the new workflow model requirements.

- Unit tests in `tests/unit/test_workflows.py` have been updated to use the organization parameter when fetching workflows and testing execution queries, ensuring consistency in workflow retrieval across the project.

These changes centralize access at the organization level, improving consistency and preventing potential mismatches that could occur by using user information directly.