---
title: "Check model permissions on `/api/v1/workflows/targets/{cuid}/executions` (#1470)"
categories: [backend, 25.05.04, hotfix, bug]
sidebar: release-notes
toc-expand: true
date: "May 16, 2025"
# Content edited by AI - 2025-06-04 18:01
# Content validated by AI - 2025-06-04 18:01
# Content overwritten from an earlier version - 2025-06-04 18:01
# PR URL: https://github.com/validmind/backend/pull/1470
---

This update refines the API route `/api/v1/workflows/targets/{cuid}/executions`. Previously, `Workflow.get_workflow` included the user to select workflows within the user's organization, while `Execution.get_by_target` selected executions by target (model) from all organizations. Now, `Execution.get_by_target` also includes the user, ensuring executions by target are selected only from the user's organization.

This update refactors workflow retrieval methods to focus on the associated organization rather than the user object. Key changes include:

- In `src/backend/db/workflow.py`, the `get_workflow` method now requires an organization and a CUID. It raises a `ValueError` with a descriptive message if the organization is not provided.

- The `get_by_target` method now accepts an organization parameter, filtering queries by the organization linked to the workflow, ensuring executions are correctly scoped.

- REST API endpoints in `src/backend/routes/ui_workflows.py` now pass `g.current_user_org` to `Workflow.get_workflow`, aligning with the new model requirements.

- Unit tests in `tests/unit/test_workflows.py` have been updated to use the organization parameter, ensuring consistent workflow retrieval.

These changes centralize access at the organization level, improving consistency and preventing mismatches from using user information directly.