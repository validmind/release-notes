---
title: "Improve metadata filtering for `figure` queries (#1371)"
categories: [backend, 25.05, release]
sidebar: release-notes
toc-expand: true
date: "April 28, 2025"
# CHECK: Title validation failed - The edited content is a clear improvement over the original. It provides a more specific and descriptive action ("Improve" instead of "Fix") and clarifies the context by specifying "metadata filtering" rather than just "metadata." Additionally, the use of backticks around "figure" indicates that it is likely a code or query term, which adds clarity. Overall, the edited version is more precise and informative.
# Content overwritten from an earlier version - 2025-06-06 08:50
# PR URL: https://github.com/validmind/backend/pull/1371
---

# PR Summary

This pull request enhances the metadata filtering mechanism in the database query for figures. The primary functional change is an update to the condition that constructs filters from metadata keys. When the metadata value is a timestamp (either a datetime or a date object), the code now casts the JSON value (extracted as a string) to a DateTime type using the database's casting functionality. This ensures that comparisons between timestamp values in the metadata and the provided datetime/date objects are performed correctly.

Other changes include a minor version bump in the project configuration file (pyproject.toml), but the focus of this PR is on the improved handling of timestamp metadata.